+++
title= "LinuxTips12"
date = "2021-02-13T08:26:19+08:00"
description = "LinuxTips12"
keywords = ["Technology"]
categories = ["Technology"]
+++
### 1. vagrant-libvirt
vagrant  2.2.14版中的一个包依赖BUG导致几乎所有的插件都没法装。解决方案是回归到旧版本的vagrant后安装vagrant-libvirt:    

```
$ sudo pacman -U /var/cache/pacman/pkg/vagrant-2.2.10-2-x86_64.pkg.tar.zst
$ vagrant --version
Vagrant 2.2.10
```
Install `vagrant-libvirt` via:    

```
$ vagrant plugin install vagrant-libvirt  --plugin-clean-sources --plugin-source  https://mirrors.tuna.tsinghua.edu.cn/rubygems/ --debug
$ vagrant plugin install vagrant-mutate  --plugin-clean-sources --plugin-source  https://mirrors.tuna.tsinghua.edu.cn/rubygems/ --debug
```
Examine the installed vagrant plugins:    

```
$ vagrant plugin list
vagrant-libvirt (0.3.0, global)
vagrant-mutate (1.2.0, global)
```
### 2. Ignore PKG globally
For ignoring some package in archlinux's pacman upgrade, do following:     

```
$ sudo vim /etc/pacman.conf
IgnorePkg   = vagrant
```
Then in next `pacman -Syu --noconfirm` we will ignore vagrant.   
### 3. Enable dmesg
Enable dmesg for normal user:    

```
# sudo sysctl kernel.dmesg_restrict=0
```
### 4. docker.io启动panic
现象: systemctl restart docker报错无法启动，查看原因怀疑是containerd问题，     

```
# journalctl -xeu containerd>kkkk.txt
# cat kkkk.txt
```
在输出的日志中发现`invalid page type: xx: xx`问题，此时直接`apt-get purge`掉所有和docker/containerd相关的包，而后删除`/var/lib/containerd`目录, 问题得以解决。     

### 5. System Installation Time
Detect the system installation time via:    

```
# ls -lact --full-time /etc |tail
```

### 6. disable fedora initial-setup
via:    

```
# systemctl stop initial-setup && systemctl disable initial-setup
```

### 7. python3's SimpleHTTPServer
via:    

```
$ python3 -m http.server 8888
```
