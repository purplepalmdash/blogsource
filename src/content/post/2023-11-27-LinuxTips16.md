+++
title= "LinuxTips16"
date = "2023-11-27T11:37:08+08:00"
description = "LinuxTips16"
keywords = ["Technology"]
categories = ["Technology"]
+++
### 1. ArchLinux ctg items
Install nomachine:    

```
$ export https_proxy=http://192.168.1.194:10809
$ export http_proxy=http://192.168.1.194:10809
$ yay  --sudoflags="http_proxy=http://192.168.1.194:10809 https_proxy=http://192.168.1.194:10809" nomachine
```
Configure auto-login refers to `2021-06-15-iPadiPhoneMirroringDisplay.md`    

connecting to :    

![/images/2023_11_27_11_40_04_660x179.jpg](/images/2023_11_27_11_40_04_660x179.jpg)

### 2. conda deactivate base
via:    

```
conda config --set auto_activate_base false
```
Doing this could let python to be set to system default.    

```
$ which python3
/usr/bin/python3
```

### 3. lxc with nvidia support
Start a lxc instance via:    

```
$ sudo lxc launch images:ubuntu/jammy lxcnvidia
Creating lxcnvidia
Starting lxcnvidia                        
$ sudo lxc config set lxcnvidia nvidia.driver.capabilities=all
$ sudo lxc config show lxcnvidia  | grep nvidia
  nvidia.driver.capabilities: all
```
Configure in lxc instance:    

```
$ sudo lxc exec lxcnvidia bash
root@lxcnvidia:~# 
```
### 4. lxc with nvidia(correct way)
Steps:   

```
lxc launch ubuntu:18.04 cuda -c nvidia.runtime=true
lxc config device add cuda gpu gpu
lxc exec cuda -- nvidia-smi
```
### 5. lxc add second nic(macvlan)
Create a new profile:   

```
$ cat macvlan
config: {}
description: Default LXD profile modified for using macvlan
devices:
  eth1:
    nictype: macvlan
    parent: enp3s0 
    type: nic
name: macvlan
```
Create this new profile:    

```
# lxc profile edit macvlan<macvlan
# lxc config edit cuda
    profiles:
    - default
+++    - macvlan
# lxc restart cuda
# lxc exec cuda bash
dhclient eth1
```
Then you got the address.      

Start the ui:    

```
dash@cuda:~/webui$ ./webui.sh 

################################################################
Install script for stable-diffusion + Web UI
Tested on Debian 11 (Bullseye)
################################################################

``` 
Should change its listening address to `0.0.0.0`

### 6. lxc on ubuntu22.04
not started, solved via:    

```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash systemd.unified_cgroup_hierarchy=false"

```
